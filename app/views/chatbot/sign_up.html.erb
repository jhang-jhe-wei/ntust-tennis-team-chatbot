<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;900&display=swap');
  *{
      font-family: 'Noto Sans TC', sans-serif;
  }
  body{
      padding: 0;
      background-color: #1E2532;
  }
  .container{
      width:80%;
      margin:0 auto;
      padding-top: 10%;
      position: relative;
  }
  .text{
      width:90%;
      font-size:18px;
      padding: 10px 0px;
      border-radius: 45px;
      padding-left: 20px;
      margin-top: 30px;
  }
  .btn{
      width:100%;
      font-size: 18px;
      padding: 10px 0px;
      border-radius: 45px;
      margin-top: 30px;
      color:white;
      background-color: #FFBD59;
  }
  .btn_save{
      width:100%;
      font-size: 18px;
      padding: 10px 0px;
      border-radius: 45px;
      margin-top: 70px;
      color:white;
      background-color: #00C2CB;
      margin-bottom: 80px;
  
  }
  .hidden{
      display:none;
  }
  .row{
      width:100%;
  }
  .col{
      width:19%;
      display:inline-block;
      text-align: center;
      color:white;
      font-size: 25px;
      height:100px;
      background-color: #ffffff;
      border-top: 4px solid #1E2532;
  
  
  }
  .topic{
      border-top:none;
      background-color: #FFBD59;
      height:70px;
  }
</style>
<div class="container">
  <div id="pnl_info">
    <input id="student_id" placeholder="學號" class="text" value= "<%= @user.student_id%>"/>
    <input id="name" placeholder="姓名" class="text" value= "<%= @user.name%>"/>
    <input type="button" value="空堂時間" class="btn" onclick="setClass()"/>
    <input type="button" value="儲存" class="btn_save" onclick="save()" />
  </div>
  <div class="hidden" id="pnl_hide">
    <div class="row">
      <div class="col topic">M</div>
      <div class="col topic">T</div>
      <div class="col topic">W</div>
      <div class="col topic">R</div>
      <div class="col topic">F</div>
    </div>
    <div class="row">
      <div class="col" id="1-1" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-1" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-1" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-1" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-1" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-2" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-2" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-2" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-2" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-2" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-3" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-3" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-3" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-3" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-3" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-4" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-4" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-4" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-4" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-4" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-5" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-5" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-5" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-5" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-5" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-6" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-6" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-6" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-6" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-6" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-7" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-7" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-7" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-7" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-7" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-8" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-8" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-8" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-8" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-8" onclick="setFree(this)">&nbsp;</div>
    </div>
    <div class="row">
      <div class="col" id="1-9" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="2-9" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="3-9" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="4-9" onclick="setFree(this)">&nbsp;</div>
      <div class="col" id="5-9" onclick="setFree(this)">&nbsp;</div>
    </div>
    <input type="button" value="儲存" class="btn_save" onclick="back()"  />
  </div>
</div>
<script>
  var log = [];
  function setClass(){
      var pnl = document.getElementById("pnl_hide");
      var pnlx = document.getElementById("pnl_info");
      pnl.style.display = "block";
      pnlx.style.display = "none";
  }
  
  function save(){
    liff
    .init({
      liffId: "<%= ENV['LIFF_COMPACT'].remove('https://liff.line.me/')%>"
    })
    .then(() => {
      liff.sendMessages([
  {
    type: 'text',
    text: `個人資料:${document.getElementById("student_id").value}:${document.getElementById("name").value}`
  }
  ]);
  liff.closeWindow();
    })
    .catch((err) => {
      console.log(err.code, err.message);
    });
  
  }
  
  function setFree(obj){
      if(log.indexOf(obj.id) == -1){
          log.push(obj.id);
          obj.style.backgroundColor = "#88E1B7";
      }
      else{
          var x = log.indexOf(obj.id);
          log.splice(x, 1);
          obj.style.backgroundColor = "#ffffff";
      }
      console.log(log);
  }
  
  function back(){
      var pnl = document.getElementById("pnl_hide");
      var pnlx = document.getElementById("pnl_info");
      pnl.style.display = "none";
      pnlx.style.display = "block";
  
  }
</script>
<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
